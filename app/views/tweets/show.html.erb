<h1>Page for showing individual tweet</h1>
<div>
    <%@username%>
    <p><b><p>@<%= @username %></p><b> said:</p>
    <p><b><em>Body:</em></b></p>
    <%= @tweet.body %>
    <div>
        <%= link_to "Edit this tweet", edit_tweet_path, method: :get %>
        <%= button_to "Delete this tweet", tweet_path, method: :delete %>
        <%= link_to "Back to home page", tweets_path %>
        <% if @tweet.likes.any? %>
            <div>
                <p><%=@tweet.likes.count%> Likes </p>
                <%= button_to "Unlike tweet", like_path(@tweet.likes.find_by(user_id: current_user.id)), method: :delete %>
            </div>
        <% else %>
            <%= button_to "Like", likes_path(@tweet), params: {like: {likeable_type: @tweet.class.name, likeable_id: @tweet.id }}, method: :post %>
        <% end %>
        <% if  current_user.bookmarks.exists?(bookmarkable_id: @tweet.id ,bookmarkable_type: "Tweet", user_id: current_user.id ) %>
            <%= button_to "Unbookmark", bookmark_path(@tweet.bookmarks.find_by(user_id: current_user.id)), method: :delete %>
        <% else %>
            <%= button_to "Bookmark", bookmarks_path(@tweet), params: {bookmark: {bookmarkable_type: @tweet.class.name, bookmarkable_id: @tweet.id}}, method: :post %>
        <% end %>
    </div>
</div> 
<div>
    <div>
        <h3>Comments for this tweet:</h3>
        <div>
            <% @tweet.comments.each do |comment| %>
                <div>
                    <p>@<%= comment.user.username %></a>
                    <em><%= comment.created_at %></em>
                    <%= comment.body %>
                    <% if comment.likes.any? %>
                        <div>
                            <p><%= comment.likes.count %> Likes</p>
                            <%= button_to "Unlike Comment", like_path(comment.likes.find_by(user_id: current_user.id)), method: :delete %>
                        </div>
                    <% else %>
                        <%= button_to "Like Comment", likes_path(comment), params: {like: {likeable_type: comment.class.name, likeable_id: comment.id}}, method: :post %>
                    <% end %>
                    <% if current_user.bookmarks.exists?(bookmarkable_id:comment.id, bookmarkable_type: "Tweet", user_id: current_user.id) %>
                        <%= button_to "Unbookmark Comment", bookmark_path(comment.bookmarks.find_by(user_id: current_user.id)), method: :delete%>
                    <% else %>
                        <%= button_to "Bookmark Comment", bookmarks_path(comment), params: {bookmark: {bookmarkable_id: comment.id, bookmarkable_type: comment.class.name}}, method: :post%>
                    <% end %>
                    <% if comment.user_id == current_user.id %>
                        <%= button_to "Delete comment", tweet_comment_path(@tweet, comment), method: :delete %>
                    <% end %>
                </div>
            <% end %>
        </div>
    </div>
    <div>
        <h3>Add a comment to this tweet:</h3>
        <%= form_with model: [@tweet,@tweet.comments.build] do |form| %>
            <%= form.label :body %>
            <%= form.text_field :body %>
            <%= form.hidden_field :user_id, value: current_user.id %>
            <%= form.submit "Post Comment"%>
        <% end %>
    </div>
</div>